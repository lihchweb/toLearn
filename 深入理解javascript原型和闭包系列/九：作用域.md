
js没有块级作用域，这个块，就是大括号{}中间的内容。

if语句无法形成块级作用域。

```js
var a = 10;

if(a > 1) { //若改为a < 1 则打印结果为 undefined
  var name = 'jack'
}

console.log(name) //jack

```

for语句也没法形成块级作用域。

```js
for (var i = 0; i < 10; i ++) {
  //....
}

console.log(i) //10
```

所以，一般推荐在写代码的时候，不在‘块’里声明变量，在代码一开始就声明变量，以避免发生歧义。

例如:

```js
var i;
for(i = 0; i < 10; i++) {
  //...
}
console.log(i) // 10
```

**javascript除了全局作用域外，只有函数可以创建作用域。**

**在声明变量时，全局代码要在代码前端声明，函数中要在函数体一开始就声明好，除了这两个地方，其他地方都不要出现变量声明，而且建议采用‘单var’形式。**

什么是‘单var’形式？看下面代码:

```js
var foo = 12,
    bar,
    fn,
    name,
    age;
```

作用域可以按下图理解:

![image](https://user-images.githubusercontent.com/24636279/120750123-677cba80-c538-11eb-96e2-f9a48bc4ca3d.png)

全局代码，fn,bar代码都会形成一个作用域。作用域有上下级关系。上下级函关系就是看函数是在那个作用域下创建的。

例如fn作用域下创建了bar作用域，那么fn作用域就是bar作用域的上级。

**作用域的最大作用就是隔离变量，不同作用域下同名变量不会有冲突。**

例如上图代码每个作用域都声明了a变量，但他们是在各自的作用域下，不会有冲突。

jQuery源码的最外层是一个自动执行的匿名函数：

![image](https://user-images.githubusercontent.com/24636279/120750508-0dc8c000-c539-11eb-848f-f01e35564eaf.png)


为什么要这么做呢?

因为在jQuery的源码中，声明了大量的变量，这些变量被一个自执行的匿名函数限定在一个独立的作用域中，而不会与全局作用域或者其他函数作用域的同名变量产生冲突。

使用jQuery的人数众多，如果不这么做，就会导致jQuery源码中的变量与外部JavaScript代码中的变量同名，从而产生冲突，引发错误。



