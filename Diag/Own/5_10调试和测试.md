# 调试案例

## 调试案例（一）：1235 frame的显示与否

1. DeviceSupport.js里搜索1235，可发现其frmId为：DC1235Adj_frm，其显示条件为：dc1235AdjVisiField
2. 搜索  dc1235AdjVisiField 函数可发现以下代码：

```javascript
function dc1235AdjVisiField() {
  if (supportAuthUserType === 'KO' || (top.Cmn.CmnAudGetAdminTp() === 'SA' && top.Cmn.CmnAudGetSATp() === 'NONE') ||
    (top.Cmn.CmnJdgForNistSA() == true && top.Cmn.CmnJdgForSADsp('SYSTEM') == true)) {
      // 这里可以看出，是否存在是由LibGetExist方法的返回值决定的。
      return top.Cmn.LibGetExist('DC1235_COPY_ISOLATED_POINT') === 'ENBL';
  }
  return false;
}
//DeviceSupport_frm
```

3. 从 msg.json 中搜索 DC1235Adj_Title_PTxt，其title为：コピー画質調整 → 中文：复印画质调整
4. 因为1235 frame画面的复印画质调整功能是由机型本身决定的，要更改这个信息，需要从 .pl文件修改
5. 在 asLibCfg.pl 文件里 搜索 DC1235_COPY_ISOLATED_POINT，可见其值现在为1，结合上述代码的注释，把1改为0，那这个函数的返回值肯定不为 ENBL 了。
6. 因为if内返回了一个false的结果，所以该页面就不会显示了。
7. 此时刷新页面，Start Init之后，发现该页面不显示了。

> 页面入口：设定 > 保守 >  コピー画質調整



- [x] 此例中如何找到1235 frame的入口？：查找页面打开条件，结合生成的 JVOS文件
- [ ] DiagFinAdj.js 里是进行了什么操作?



> Fin可以理解为外设相关的设备，可以在进入画面时再进行设置



还可以在chrom SIM里调整

- CfgLib (beta) 里，可以看到诸如：Config ---- LibGetCfgSts(Id) ， Option ---- LibGetOptSts(Id)， Service --- LibGetSvcSts(Id)，点击对应即可看到配置项。设置完 update
- CfgLib 里
  - 找到Finisher。会有各种选项
  - PDI下的模拟器

>  Booklet ：制本。  Punch ：打洞。 Creaser ：折痕等等。



## 更改NVM设置



- 在SystemData下的NVM选项，更改NVM全局变量，一些可变的配置参数。
- 或者在 Utility 里，将要更改的代码复制进去，然后Exec执行。
- 直接在控制台输入相应的值，也可以该起效。



- [x] NVM id是什么，从哪儿来: DebugFrame的Finisher里有很多选项，每一个选项就是一个NVM id。可以在SystemData下的NVM选项，设置并且查询这个值的状态。另：也可以在控制台: top.As.AsNVM.BFin 查看。
- [ ] 1203的那个，具体是怎么操作的？
  - [ ] 在 DeviceSupport.js 里找到了 diagFinAdjGetDC1203Visi()方法
  - [ ] 又在 DiagFinAdj.js 里找到了 diagFinAdjDC1203Visi()方法

> 从控制台打印出值，然后改变什么的。

```javascript
-----------D2G-Fin--------------------------------------
top.As.AsNVM.D2GFin=1;
top.As.AsNVM.CHFin=0;
top.As.AsNVM.ZFold=1;
top.As.AsNVM.Booklet=1;
top.As.AsNVM.Creaser=1;
top.As.AsNVM.JobDispType=1;

4095
非定型Size
X-297
Y-210
-----------CH-Fin--------------------------------------
top.As.AsNVM.D2GFin=0;
top.As.AsNVM.CHFin=1;
top.As.AsNVM.ZFold=1;
top.As.AsNVM.Booklet=1;
top.As.AsNVM.Creaser=1;
top.As.AsNVM.JobDispType=1;
```



##  Products 种类

- wakasa: 是office 机，不支持称量
- pinot：支持称秤量



## 如何更改Products名称？

- 在控制台 top.ProductName 可获取产品名称。
- 更改后，重跑当前文件夹内的 bat文件，并刷新，再次输入top.ProductName可以看到值改变了



- [ ] 在index2.htm里修改的，刷新后也看到值改变了?

## 如何更改run画面状态

看Mid，找到哪个呼出了run画面，在哪个文件里查找options选项对应的值？

## 大小屏幕效果查看

-  Panel Type 里可以设置



> 找对应函数，一个函数名字 + 上什么的





